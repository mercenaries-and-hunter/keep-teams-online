(()=>{"use strict";const o=(o,e="string")=>new Promise((e=>{var n,t;null===(t=null===(n=chrome.storage)||void 0===n?void 0:n.local)||void 0===t||t.get(o,(function(n){console.log(o,null==n?void 0:n[o]),e(null==n?void 0:n[o])}))})),e=o=>{var e;null===(e=null===chrome||void 0===chrome?void 0:chrome.tabs)||void 0===e||e.query({},(function(e){null==e||e.forEach((e=>{null===chrome||void 0===chrome||chrome.tabs.sendMessage(null==e?void 0:e.id,o).catch((o=>{console.log(o)}))}))}))},n=function(n,t,i){return"on"===n.args?(e({type:"on"}),void i({data:!0})):"off"===n.args?(e({type:"off"}),void i({data:!1})):"get-config"!==n.args||void i({flag:o("flag")})};var t;chrome.runtime.onMessage.addListener(n),chrome.runtime.onMessageExternal.addListener(n),chrome.runtime.onInstalled.addListener((()=>{chrome.action.setBadgeText({text:""})})),null===(t=chrome.action)||void 0===t||t.onClicked.addListener((()=>{return e=void 0,n=void 0,i=function*(){const e=(yield o("flag"))?"off":"on";((o,e)=>{var n,t;null===(t=null===(n=null===chrome||void 0===chrome?void 0:chrome.storage)||void 0===n?void 0:n.local)||void 0===t||t.set({[o]:e})})("flag",!(yield o("flag"))),yield chrome.action.setBadgeText({text:e})},new((t=void 0)||(t=Promise))((function(o,l){function r(o){try{c(i.next(o))}catch(o){l(o)}}function a(o){try{c(i.throw(o))}catch(o){l(o)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(o){o(n)}))).then(r,a)}c((i=i.apply(e,n||[])).next())}));var e,n,t,i}))})();